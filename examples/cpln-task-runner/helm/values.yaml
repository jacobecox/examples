# Default values for cpln-task-runner.
# This is a YAML-formatted file.
# Declare variables to be passed into your templates.

cpln:
  gvc: ""  # Required: GVC name
  org: ""  # Required: Organization name

image:
  repository: ""  # Required: Image repository (e.g., your-registry/cpln-task-runner)
  tag: "latest"

api:
  name: task-runner-api
  replicas: 2
  cpu: 500m
  memory: 512Mi
  port: 8080

worker:
  name: task-runner-worker
  replicas: 3
  cpu: 1000m
  memory: 1024Mi
  concurrency: 10

# Redis Sentinel configuration
redis:
  # Use the global internal endpoint for sentinel (e.g., "redis-sentinel.mygvc.cpln.local:26379")
  # This automatically load balances across all sentinel replicas
  sentinelAddr: "redis-sentinel:26379"
  masterName: "mymaster"
  password: ""
  sentinelPassword: ""

# Secret name for storing sensitive values
secrets:
  name: task-runner-secrets

# Task configuration
task:
  timeoutSec: 1800
  maxRetry: 5

# Circuit breaker configuration
circuitBreaker:
  maxRequests: 3
  intervalSec: 60
  timeoutSec: 30
  failureThreshold: 5

# Firewall configuration
firewall:
  internal_inboundAllowType: "same-gvc"
  external_inboundAllowCIDR: "0.0.0.0/0"
  external_outboundAllowCIDR: "0.0.0.0/0"

# OpenTelemetry configuration
otel:
  enabled: false
  endpoint: ""

# Logging
logLevel: "info"

# Admin API key (should be stored in secrets in production)
adminApiKey: ""

